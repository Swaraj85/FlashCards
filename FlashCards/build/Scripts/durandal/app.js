define(["durandal/system","durandal/viewEngine","durandal/composition","durandal/events","jquery"],function(e,n,t,a,i){function r(){return e.defer(function(n){return 0==o.length?(n.resolve(),void 0):(e.acquire(o).then(function(t){for(var a=0;a<t.length;a++){var i=t[a];if(i.install){var r=u[a];e.isObject(r)||(r={}),i.install(r),e.log("Plugin:Installed "+o[a])}else e.log("Plugin:Loaded "+o[a])}n.resolve()}).fail(function(n){e.error("Failed to load plugin(s). Details: "+n.message)}),void 0)}).promise()}var s,o=[],u=[];return s={title:"Application",configurePlugins:function(n,t){var a=e.keys(n);t=t||"plugins/",-1===t.indexOf("/",t.length-1)&&(t+="/");for(var i=0;i<a.length;i++){var r=a[i];o.push(t+r),u.push(n[r])}},start:function(){return e.log("Application:Starting"),this.title&&(document.title=this.title),e.defer(function(n){i(function(){r().then(function(){n.resolve(),e.log("Application:Started")})})}).promise()},setRoot:function(a,i,r){var s,o={activate:!0,transition:i};s=!r||e.isString(r)?document.getElementById(r||"applicationHost"):r,e.isString(a)?n.isViewUrl(a)?o.view=a:o.model=a:o.model=a,t.compose(s,o)}},a.includeIn(s),s});