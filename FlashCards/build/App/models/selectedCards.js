define(["durandal/app","durandal/system","plugins/observable","services/flashCardService","models/random"],function(e,n,t,s,a){var i={name:"",cards:[],card:{},index:0,found:!1,random:!1};return e.on("randomChanged").then(function(e){n.log("Random changed: "+e),i.random=e}),i.select=function(e){return s.getCards(e).done(function(n){i.found=!0,i.cards=n,i.name=e,i.index=0,i.card=i.cards[0]}).fail(function(){i.found=!1})},i.setIndex=function(e){return e=parseInt(e),0>e||e>i.cards.length-1?(i.found=!1,void 0):(i.index=e,i.card=i.cards[e],void 0)},i.nextIndex=function(){return i.random?a.pickRandom(i.cards):i.index<i.cards.length-1?i.index+1:i.cards.length-1},i.previousIndex=function(){return i.index<1?0:i.index-1},t.defineProperty(i,"hasNext",function(){return i.random?!0:i.index<i.cards.length-1}),t.defineProperty(i,"hasPrevious",function(){return i.random?!1:i.index>0}),t.defineProperty(i,"selectedOf",function(){return i.cards&&0!==i.cards.length?i.index+1+" of "+i.cards.length:""}),t.convertObject(i),i});